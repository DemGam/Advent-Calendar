(()=>{"use strict";const e=document.querySelector("#calendar"),t=new XMLHttpRequest,n=new DOMParser;let a=new Date,s=a.getDate();e&&(s<=15?t.open("get","files/calendar_data.xml",!0):t.open("get","files/calendar_data_second.xml",!0),t.send(),t.onreadystatechange=function(){if(4==t.readyState){if(200==t.status){let r=n.parseFromString(t.responseText,"text/xml").getElementsByTagName("day");for(var a=0;a<r.length;a++){let t=r[a].getElementsByTagName("date")[0].textContent,n=r[a].getElementsByTagName("bg")[0].textContent;if(parseInt(t)<s&&e.insertAdjacentHTML("beforeend",`<div class="calendar__box calendar__box_bg"><img src="img/gifts/${n}" alt="Gift of the day"></div>`),parseInt(t)==s){let s=r[a].getElementsByTagName("link")[0].textContent;e.insertAdjacentHTML("beforeend",`<div class="calendar__box calendar__box_current" data-url="${s}"><img src="img/gifts/${n}" alt="Gift of the day"><h3 class="calendar__day">${t}</h3></div>`)}parseInt(t)>s&&e.insertAdjacentHTML("beforeend",`<div class="calendar__box"><h3 class="calendar__day">${t}</h3></div>`)}e.insertAdjacentHTML("beforeend",'<div class="calendar__box calendar__box_decor"><img src="img/gifts/bells.webp" alt="X-mass bells"></div>'),function(){const e=document.querySelector(".calendar__box_current"),t=e.dataset.url;e&&e.addEventListener("click",(function(){e.classList.toggle("_animate-active"),setTimeout((()=>{window.location.href=t}),500)}),{once:!0})}()}404==t.status&&(e.insertAdjacentHTML("beforeend",'<h3 class="error-message">Something has gone wrong<br>Try again later</h3>'),console.log("File of resource not found"))}});const r=document.querySelector("#winners"),c=new XMLHttpRequest;let i=["January","February","March","April","May","June","July","August","September","October","November","December"][a.getMonth()];r&&(c.open("get","files/winners-current.xml",!0),c.send(),c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){let t=n.parseFromString(c.responseText,"text/xml");r.insertAdjacentHTML("beforeend",'<div class="winners__year">This year\'s winners</div>');let a=document.createElement("div");function l(e,t,n){let s=document.createElement("div");s.className="winners__card card-winner",s.innerHTML=e+t+n,a.appendChild(s)}a.className="winners__cards",r.appendChild(a);let o=t.getElementsByTagName("winner");for(var e=0;e<s;e++){let m=o[e].getElementsByTagName("day")[0].textContent,g=o[e].getElementsByTagName("name")[0].textContent,_=o[e].getElementsByTagName("town")[0].textContent,p=o[e].getElementsByTagName("prize")[0].textContent;l(`<div class="card-winner__date">${m} ${i}</div>`,`<p class="card-winner__data">${`<span class="card-winner__name">${g}, </span>`}${`<span class="card-winner__town">${_}</span>`}</p>`,`<p class="card-winner__prize">${p}</p>`)}d.open("get","files/winners-past.xml",!0),d.send(),d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){let e=n.parseFromString(d.responseText,"text/xml").getElementsByTagName("winners");Object.values(e).forEach((e=>{r.insertAdjacentHTML("beforeend",`<div class="winners__year">Winners of ${e.getAttribute("year")}</div>`);let t=document.createElement("div");function n(e,n,a){let s=document.createElement("div");s.className="winners__card card-winner",s.innerHTML=e+n+a,t.appendChild(s)}t.className="winners__cards",r.appendChild(t);let a=e.getElementsByTagName("winner");Object.values(a).forEach((e=>{n(`<div class="card-winner__date">${e.getElementsByTagName("day")[0].textContent} December</div>`,`<p class="card-winner__data"><span class="card-winner__name">${e.getElementsByTagName("name")[0].textContent}, </span><span class="card-winner__town">${e.getElementsByTagName("town")[0].textContent}</span></p>`,`<p class="card-winner__prize">${e.getElementsByTagName("prize")[0].textContent}</p>`)}))}))}}}});const d=new XMLHttpRequest;window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}))})();